<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kitaplar</title>
    <style>
        body { font-family: Arial; padding: 30px; background: #f4f4f4; }
        #kitapCard { background: white; padding: 20px; border-radius: 8px; max-width: 500px; margin: auto; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        button { margin: 10px; padding: 8px 16px; font-size: 16px; }
    </style>
</head>
<body>
    <h2 style="text-align:center">Kitap Gezgini</h2>
    <div id="kitapCard">
        <h3 id="kitapIsim"></h3>
        <p><strong>Yazar:</strong> <span id="kitapYazar"></span></p>
        <p><strong>Açıklama:</strong> <span id="kitapAciklama"></span></p>
        <p><strong>Sıra:</strong> <span id="kitapSira"></span></p>
        <p><strong>Şube:</strong> <span id="kitapSube"></span></p>           <!-- eklendi -->
        <p><strong>Durum:</strong> <span id="kitapDurum"></span></p>         <!-- eklendi -->
        <div style="text-align: center;">
            <button onclick="onceki()">⏪ Önceki</button>
            <button onclick="sonraki()">Sonraki ⏩</button>
        </div>
    </div>

<script>
    let sira = 1;
    let toplam = 0;

    function kitapYukle() {
        fetch(`/kitap/${sira}`)
            .then(res => res.json())
            .then(data => {
                if (data.hata) {
                    document.getElementById("kitapCard").innerHTML = `<p>${data.hata}</p>`;
                    return;
                }
                document.getElementById("kitapIsim").innerText = data.kitap.isim;
                document.getElementById("kitapYazar").innerText = data.kitap.yazar;
                document.getElementById("kitapAciklama").innerText = data.kitap.aciklama;
                document.getElementById("kitapSira").innerText = data.kitap.sira;
                document.getElementById("kitapSube").innerText = data.kitap.sube || "Genel";
                document.getElementById("kitapDurum").innerText = data.kitap.durum || "Bilinmiyor";

                // Butonları kontrol et
                document.querySelector('button[onclick="onceki()"]').disabled = (sira <= 1);
                document.querySelector('button[onclick="sonraki()"]').disabled = (sira >= toplam);
            });
    }

    function kitapSayisiniAl() {
        fetch('/kitap-sayisi')
            .then(res => res.json())
            .then(data => {
                toplam = data.toplam;
                kitapYukle(); // ilk kitap yüklensin
            });
    }

    function onceki() {
        if (sira > 1) {
            sira--;
            kitapYukle();
        }
    }

    function sonraki() {
        if (sira < toplam) {
            sira++;
            kitapYukle();
        }
    }

    kitapSayisiniAl(); // ilk yüklemede toplam sayıyı çek
</script>